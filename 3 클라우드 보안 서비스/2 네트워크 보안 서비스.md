# 네트워크 보안 서비스

## 1. 가상 사설 클라우드(VPC)
- 가상 사설 클라우드는 클라우드 사용자가 직접 정의하는 가상의 개인 네트워크이다.
  - 다른 가상 사설 클라우드와 논리적으로 구분되어 있기 때문에, 상호 간에 호출이 차단되고 독립된 격리 네트워크망을 구성할 수 있다.
- 상호 간의 격리가 요구되는 환경이 필요한 경우에, 다수의 가상 사설 클라우드를 별로도 생성하여 독립적인 클라우드 네트워크망을 구성할 수도 있다.
  - 네트워크 간의 호출을 방지하여 보안성을 높이고, 네트워크별로 특수성이 있는 서비스를 구축할 수 있다.

## 2. 서브넷
- 서브넷은 가상 사설 클라우드에서 IP 주소 범위를 설정해서 원하는 자원을 구성할 수 있는 작은 네트워크망이다.
- 클라우드 서비스에서 자원을 생성하려면 자원이 위치해야 할 가상 사설 클라우드와 가용 영역이 고정된 서브넷 선택은 필수이다.
- 서브넷을 설정한 경우 기본적으로 같은 IP 주소 대역대에서만 네트워크 통신이 가능하고, 그 외 대역은 통신이 불가능하다.

### 2.1. 서브넷 세분화
- 인터넷상에 개방된 통합 서브넷 대역에서 인터넷 사용 여부와 서비스별로 서브넷을 분리하여 구체화할 수 있다.
- 퍼블릭 서브넷은 인터넷상으로 개방된 네트워크 영역이며, 프라이빗 서브넷은 인터넷상에서 접근이 불가능한 폐쇄된 네트워크 영역이다.
  - 퍼블릭 서브넷에 위치한 자원은 공인 IP 또는 도메인이 설정되어 있다.

### 2.2. 서브넷 재배치
- 퍼블릭 서브넷에 존재하는 자원은 인터넷 환경에서 접근할 수 있다.
  - 보안 설정이 미흡한 상태라면 물리적으로 직접 접근이 가능한 취약점이 존재할 수 있다.
  - 해당 취약점을 방어하고자 민감한 데이터나 애플리케이션 소스 코드 등이 포함된 IT 자원은 프라이빗 서브넷으로 배치하여 외부에서 접근할 수 있는 가능성을 제거한다.

## 3. 접근 제어 목록(ACL)
- 접근 제어 목록(ACL)은 외부 네트워크에서 사용자의 네트워크를 통과하는 경우, IP 주소와 포트 번호, 프로토콜 등을 확인해서 네트워크 패킷 통과를 허가하거나 거부하는 목록이다.
- 접근 제어 목록에는 두 가지 규칙이 있다.
  - **인바운드 규칙**
    - 외부 인터넷 환경에서 클라우드 내부로 전달된다.
  - **아웃바운드 규칙**
    - 클라우드 내부에서 외부 인터넷 환경으로 나간다.
- 접근 제어 목록에는 두 가지 유형이 있다.
  - **거부 목록** (Black List)
    - 패킷이 출발하는 소스 IP를 기준으로 거부 대상이 되는 IP 대역이다.
  - **허용 목록** (White List)
    - 소스 IP를 기준으로 허용 대상이 되는 IP 대역에 대한 목록이다.

## 4. 방화벽
- 방화벽은 가상 사설 클라우드 내에서 허용된 IP와 포트만 통과시키는 보안서비스이다.
  - OSI 7 Layer 중에서 3계층인 네트워크 계층과 4계층인 전송 계층 수준의 필터링을 수행한다.
  - 클라우드상의 단위 자원에 할당하여, 세밀한 트래픽 제어와 보안 위협을 방지할 수 있다.
  - 방화벽의 관리 범위는 클라우드 자원 단위로 할 것인지, 클라우드 자원의 목적별로 그룹을 지을 것인지 등에 대한 설계이다.
    - 또한, 관리 효율성을 위해 명명 규칙 또한 정의되어야 할 것이다.
- 방화벽은 인바운드 규칙과 아웃바운드 규칙을 허용하는 IP와 포트를 설정한다.
  - 특히, 방화벽은 트래픽의 상태 정보를 저장할 수 있는 Stateful 속성을 가지므로, 인바운드 규칙과 아웃바운드 규칙을 대칭해서 구성할 필요하는 없다.
- 방화벽은 퍼블릭 서브넷과 프라이빗 서브넷 하위에 존재한다.
  - 가상머신 자원에 도달하는 패킷을 IP와 포트로 필터링하고자 퍼블릭과 프라이빗 유형으로 구분하여 방화벽을 생성할 수 있다.
- 다수의 가상머신과 로드밸런서, 컨테이너 등의 자원을 원하는 대로 그룹을 짓거나, 자원 모두 개별적으로 분리해서 방화벽을 적용할 수 있다.
  - 사용자는 클라우드 자원의 방화벽을 설정함과 동시에 트래픽 제어가 시작됨으로, 반화벽 변경 작업을 주의깊게 수행해야 한다.
  - 방화벽을 설정할 때 주의할 점은 다음과 같다.
    - 소스 IP, 목적지 IP, 포트는 사용하는 정보만으로 설정
    - CIDR의 범위는 최소한으로 설정
    - Any IP, Any Port, Any Protocol로 설정은 최소화하고, 적절한지 장기적으로 확인

### 4.1. 방화벽 세분화 구성
- 방화벽도 서브넷과 유사하게 원하는 자원을 선택해서 그룹핑하여 설정할 수 있다.
- 관리하는 자원을 하나의 방화벽으로 통합하여 설정할 수 있다.
  - 관리 효율성은 매우 좋으나, 연관 없는 IP와 포트의 보안 규칙이 모든 자원에 일괄 적용됨으로, 보안 취약점이 존재한다.
- 허용할 IP와 포트만 정확하게 설정하여 불필요한 IP와 포트가 허용되는 보안 취약점을 제거할 수 있다.

### 4.2. 방화벽 범위 최소화
- 단순한 방화벽 적용은 귀우나, 업무 서비스를 제공하려면 구체적이고 정확한 방화벽의 범위 설정은 사전에 서비스 간 인터페이스 요소들이 모두 파악되어야 한다.
- 개방된 대역과 포트가 넓으면 넓을 수록 보안 위협이 발생할 수 있는 영역이 커지므로, 실제 서비스한 최소한의 IP와 포트로 설정되어 있는지 점검이 필요하다.

## 5. 네트워크 구간 암호화(TLS)
- 외부 인터넷망에 존재하는 사용자와 클라우드 자원 간에 통신을 하기 위해서 네트워크 구간에 전송되는 패킷 단위 데이터를 암호화 하는 TLS 통신을 수행해야 한다.
  - 이를 통해 네트워크 구간에서는 암호문이 전송된다.
- 클라우드 환경에서는 도메인 발급/관리 서비스와 공인 인증서 발급/등록 서비스를 통해서 TLS 설정을 가능하게 한다.
- 인증서 발급/관리 비용을 무료로 제공하고 있으며, 인증서를 갱신해야 하는 절차도 서비스로 자동화 하여 별도로 신경 쓸 필요가 없다.
  - 인증서 갱신 시점을 놓쳐서 인증서가 폐기되는 서비스 장애 문제를 사전에 방어할 수 있다.

## 6. 가상 사설 네트워크(VPN)
- 양쪽 네트워크 구간에 가상의 논리적 네트워크 사설망을 구축하여 구간 암호화 통신과 외부에서의 임의적 침입을 방지하는 가상의 전용 네트워크망을 구성할 수 있다.
- 클라우드 서비스에서는 소프트웨어로 구성된 논리적인 네트워크 서비스와 준비된 서드파티 애플리케이션으로 가상 사설 네트워크를 구성할 수 있다.

## 7. 전용선 구축(직접 연결: Direct Connect)
- 원거리 네트워크 구간에서 통신을 수행하기 위해서 일반적으로 인터넷망을 사용하기 때문에 사용 환경에 따라서 대역폭과 속도, 보안 등에 영향을 받기 쉽다.
- 따라서, 성능이나 보안에 민감한 비즈니스 요건이 존재하는 상황이라면 전용망을 구성하여 크리티컬한 비기능 요건을 충족시키는 방법을 고려해야 한다.

## 8. IDS/IPS
- 클라우드 환경에서는 마켓 플레이스를 활용하여 소프트웨어로 룰 기반, 이상 패턴, 지능형 학습 모델을 적용할 수 있는 서비스를 제공한다.
- IDS/IPS는 정상 트래픽으로 감지되면 백엔드로 전달하고 비정상 트래픽으로 감지되면 보안 관리자에게 경보 알람을 전달하게 된다.